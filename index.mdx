---
title: "Setup"
---

## About

This "library" makes develepoing many games(especially euro games) much simpler, as it provides structures for

- undo function (of single and all undoable actions)
- follow-up actions (actions that can trigger a variety of other actions)
- player actions in general
- many small helper functions

It is suited for games where the main part of the game has only one active player at a time.\
If you have already started devoleoping, it will of course be more difficult to integrate the library into your project, depending on how much you have already done. It might be easier to start a new project, include the library and keep your old code ready for copying various snippets.

## Download the code

Clone the repository from GitHub into your modules directory and name it "core":

```
git clone https://github.com/Ginso/BGA-Core.git modules/core
```

## Modify your project

There are a few changes you will have to make to the auto-generated files.\
You can either do them step by step or download the templates and replace the class and game names with your game. If you haven't started developing yet, i recommend the templates.

### Using the Templates

The templates are available here:\
// TODO

DO NOT replace the auto-generated files yet. Download them and save them somewhere.

In every js and php file adjust the comment at the top

\
Open **<u>Game.php</u>** (both the original and the template)\
In the template replace the following lines with the respective line from the generated file.

- `namespace Bga\Games\MyGame;`
- `return "MyGame";` (in the function getGameName)

Open **<u>X.js</u>** (and your generated js file)

- replace 'x' in the line `return declare("bgagame.x", [` with your game name as in the respective line from your generated file

The rest of the files can just replace the generated files

### Editing the generated files

**<u>Game.php</u>**

- insert the following AFTER the generated require_once statement:\
  (you probably won't need all the use statements, but to simplify matters, i recommend to just put them in every file)

  ```
  require_once(__DIR__ . "/../core/php/Core.php");
  use \Bga\Games\Core\DB;
  use \Bga\Games\Core\Core;
  use \Bga\Games\Core\Actions;
  use \Bga\Games\Core\Deck;
  use \Bga\Games\Core\Log;
  use \Bga\Games\Core\Utils;
  use \Bga\Games\Core\Constants;
  ```
- At the BEGINNING of the class (after `class Game extends \Table {`) insert\
  `use \Bga\Games\Core\PlayerTurn;`
- replace the constructor with the following:

  ```
  public function __construct() {
  	parent::__construct();
  	Core::initGame($this);
  	// define how the game ends. default: ENDVARIANT_END_ROUND
  	//Core::$endVariant = ENDVARIANT_END_ROUND_PLUS_ONE;
  }
  ```
- optional: implement the following function and fill it with your gamestatevalues. \
  Don't use ids below 20

  ```
  public function extendGlobalIds() {
  	Core::$globalIds["myGamestateLabel"] = 20;
  }
  ```
- replace the first line of getAllDatas with `$result = Core::initGamedatas();`

**<u>X.js</u>**

- make sure the follwing lines are below the line `define([` at the top

  ```
  "dojo","dojo/_base/declare",
  "ebg/core/gamegui",
  "ebg/counter",
  "ebg/stock",
  g_gamethemeurl + 'modules/core/js/core.js',
  g_gamethemeurl + 'modules/core/js/playerTurn.js',
  g_gamethemeurl + 'modules/core/translations/tooltips.js',
  g_gamethemeurl + 'modules/core/translations/buttons.js',
  g_gamethemeurl + 'modules/core/translations/actionbar.js',
  g_gamethemeurl + 'modules/core/translations/dialogs.js',
  g_gamethemeurl + 'modules/core/translations/general.js',
  ```
- insert this after `ebg.core.gamegui`(below `return declare...` )

  ```
  core.Core,
  core.PlayerTurn,
  core.Tooltips,
  core.Buttons,
  core.Actionbar,
  core.Dialogs,
  core.General,
  ```
- rename setup to setupCustom (the library implements setup and calls setupCustom)
- instead of adding html to game_play_area add it to `${this.game_name}Inner` (See the template for example)
- implement the function `undoAction: function(entry, player) {}` \
  See the documentation about undo
- register the following notifications:\
  undo, msg, endGame, endScore and (if you want to use it) debugNotif